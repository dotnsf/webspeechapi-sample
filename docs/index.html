<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<meta charset="utf8"/>
<meta http-equiv="pragma" content="no-cache"/>
<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" rel="stylesheet"/>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js"></script>
<script src="./cvi_busy_lib.js"></script>

<title>WebSpeech API サンプル</title>
<script>
function speechText( text, lang ){
  if( 'speechSynthesis' in window ){
    var voices = window.speechSynthesis.getVoices();
    if( !lang ){ lang = 'ja-JP'; }

    uttr = new SpeechSynthesisUtterance();
    uttr.text = text;
    uttr.lang = lang;

    window.speechSynthesis.speak( uttr );
    uttr.onend = speechEnd;
  }else{
    alert( 'このブラウザは Web Speech API に未対応です。')
  }
}

function mySpeech(){
  var text = $('#text').val();
  speechText( text ); 
}
</script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">WebSpeech API サンプル</a>
</nav>

<div class="container" style="position: relative; top: 20px;">
  <textarea id="text" class="form-control">こんにちは。東京都中央区日本橋箱崎町19-21</textarea>
  <button class="btn btn-primary" onClick="mySpeech();">WebSpeech</button>
</div>

</body>
</html>
